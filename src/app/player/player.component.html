<div class="responsive-page">
    <div class="player-grid">
        <div class="song-container" *ngIf="currentSong">
            <div class="currently-playing" *ngIf="currentPlayingSong && playing">
                <p>playing: <b (click)="selectSong(currentPlayingSong)">{{currentPlayingSong.name}}</b></p>
            </div>
            <div class="flip-card" (click)="flippedFlag = !flippedFlag" [ngClass]="{'flipped': flippedFlag}">
                <div class="album-cover icon center frontside"
                    [ngStyle]="{'background-image':  'url(' + currentSong.cover_art_url + ')'}">
                </div>
                <div class="album-cover backside">
                    <div class="lyrics">
                        {{currentSong.lyrics}}
                    </div>
                </div>
            </div>
            <div class="info-container large-font">
                <div class="info-container-item bold">{{currentSong.name}}</div>
                <div class="info-container-item">{{currentSong.artist}}</div>
                <div class="info-container-item">{{currentSong.album || '(No album)'}}
                    <i class="material-icons" (click)="searchAlbum(currentSong.album)">album</i>
                </div>
            </div>
        </div>
        <div class="song-list" *ngIf="currentPlaylist?.songs?.length">
            <div class="song-list-search">
                <div class="song-list-addon bold" (click)="nextSearchType()"
                    [ngStyle]="{'background-color': searchTypeColors[searchTypeIndex]}">
                    {{searchTypes[searchTypeIndex]}}
                    <i class="material-icons">{{searchTypeIcons[searchTypeIndex]}}</i>
                </div>
                <input type="text" #search (input)="getFilteredPlaylist(search.value)"
                    (keydown.enter)="selectFirstSong()">
            </div>
            <div *ngIf="filteredPlaylist?.length">
                <div class="song-list-item" *ngFor="let song of filteredPlaylist" (click)="songClick(song)"
                    [ngClass]="{'song-list-item-playing': songPlaying(song)}">
                    <b>{{song.name}}</b>
                    <br>{{song.artist}}
                </div>
            </div>
            <div *ngIf="!filteredPlaylist?.length" class="song-list-not-found">
                <i class="material-icons">error</i>
                No songs found!
            </div>
        </div>
        <div class="controls">
            <input type="range" class="time-bar">
            <div class="play-previous icon right" (click)="changeSong(true)"></div>
            <div class="play-pause icon center" [ngClass]="{'play-icon': !playing, 'pause-icon': playing}"
                (click)="play()"></div>
            <div class="play-next icon left" (click)="changeSong()"></div>
            <div class="shuffle icon center" [ngClass]="{'shuffle-on': shuffle, 'shuffle-off': !shuffle}"
                (click)="toggleShuffle(searchInput.nativeElement.value)"></div>
            <div class="show-lyrics icon center"></div>
        </div>
        <audio #audio></audio>
    </div>
</div>